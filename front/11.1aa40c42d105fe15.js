"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[11],{1257:(T,F,t)=>{t.d(F,{t:()=>g});var e=t(4438),c=t(431),a=t(1281),r=t(496),h=t(9640),m=t(3390),p=t(1747),u=t(5458);let g=(()=>{class E{constructor(d,C,y,n){this.store=d,this.modalService=C,this.actions$=y,this.rentService=n,this.estate=e.hFB.required(),this.lodgers=this.store.selectSignal(r.T)}downloadCustomizedRentReceipt(){this.rentService.downloadCustomizedRentReceipt(this.estate())}downloadRentReceipt(){this.rentService.downloadRentReceipt(this.estate())}senddRentReceipt(){this.rentService.sendRentReceiptByEmail(this.estate())}createLodger(){this.rentService.openCreateLodgerPopup(this.estate())}setLodger(d){this.store.dispatch((0,c.dG)({estate:{id:this.estate().id,lodger_id:d?.id??""}}))}deleteLodger(d){this.store.dispatch((0,a.rX)({lodgerId:d.id}))}static{this.\u0275fac=function(C){return new(C||E)(e.rXU(h.il),e.rXU(m.N_),e.rXU(p.En),e.rXU(u.t))}}static{this.\u0275dir=e.FsC({type:E,inputs:{estate:[1,"estate"]}})}}return E})()},7434:(T,F,t)=>{t.d(F,{N:()=>$});var e=t(4438),c=t(7462),a=t(4341),r=t(513),h=t(1997),m=t(3390),p=t(889),u=t(2062),g=t(9640);let E=(()=>{class s{constructor(o,l,f){this.data=o,this.formBuilder=l,this.store=f}ngOnInit(){this.buildFormGroup()}buildFormGroup(){this.formGroup=this.formBuilder.group({name:new a.MJ(this.data?.owner?.name??"",[a.k0.required]),street:new a.MJ(this.data?.owner?.street??""),city:new a.MJ(this.data?.owner?.city??""),zip:new a.MJ(this.data?.owner?.zip??""),signature:new a.MJ(this.data?.owner?.signature??"")})}edit(){if(this.formGroup.invalid)return;const o=(0,u.o)(this.formGroup,this.data.owner.id);this.store.dispatch((0,p.He)({owner:o}))}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(m.or),e.rXU(a.ok),e.rXU(g.il))}}static{this.\u0275dir=e.FsC({type:s})}}return s})();var O=t(8468),d=t(1747),C=t(1413),y=t(6977),n=t(6697),R=t(8141),P=t(6389),D=t(5930);let z=(()=>{class s extends E{constructor(o,l,f,L,v){super(o,l,f),this.data=o,this.formBuilder=l,this.store=f,this.modalRef=L,this.actions$=v,this.destroyed$=new C.B}ngOnInit(){super.ngOnInit(),this.actions$.pipe((0,d.gp)(p.eX),(0,y.Q)(this.destroyed$),(0,n.s)(1),(0,R.M)(()=>this.modalRef.close())).subscribe()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(m.or),e.rXU(a.ok),e.rXU(g.il),e.rXU(m.J9),e.rXU(d.En))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["edit-owner-popup"]],standalone:!0,features:[e.Vt3,e.aNF],decls:19,vars:1,consts:[[1,"form-group-popup",3,"formGroup"],["for","name"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","street",1,"form-control"],["type","text","formControlName","city",1,"form-control"],["type","text","formControlName","zip",1,"form-control"],["formControlName","signature"],[1,"footer"],["nz-button","","nzType","primary",3,"click"]],template:function(l,f){1&l&&(e.j41(0,"form",0)(1,"label",1),e.EFF(2,"Nom et pr\xe9nom"),e.k0s(),e.nrm(3,"input",2),e.j41(4,"label",1),e.EFF(5,"Adresse"),e.k0s(),e.nrm(6,"input",3),e.j41(7,"label",1),e.EFF(8,"Ville"),e.k0s(),e.nrm(9,"input",4),e.j41(10,"label",1),e.EFF(11,"Code Postal"),e.k0s(),e.nrm(12,"input",5),e.j41(13,"label",1),e.EFF(14,"Signature"),e.k0s(),e.nrm(15,"signature-pad",6),e.k0s(),e.j41(16,"div",7)(17,"button",8),e.bIt("click",function(){return f.edit()}),e.EFF(18,"\xe9diter"),e.k0s()()),2&l&&e.Y8G("formGroup",f.formGroup)},dependencies:[a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,h.DH,r.Zw,r.aO,P.c,D.p,O.u]})}}return s})();var w=t(431),M=t(1176);let $=(()=>{class s{constructor(o,l,f){this.store=o,this.modalService=l,this.actions$=f,this.estate=e.hFB.required(),this.owners=this.store.selectSignal(M.P)}openCreateOwnerPopup(){this.modalService.create({nzTitle:"Ajouter un nouveau propri\xe9taire",nzContent:c.X,nzFooter:null})}openEditOwnerPopup(o){this.modalService.create({nzTitle:"\xe9ditier un propri\xe9taire",nzContent:z,nzData:{owner:o},nzFooter:null})}createOwner(o){this.openCreateOwnerPopup()}setOwner(o,l){this.store.dispatch((0,w.dG)({estate:{...o,owner_id:l.id}}))}deleteOwner(o){this.store.dispatch((0,p.HD)({ownerId:o.id}))}editOwner(o){this.openEditOwnerPopup(o)}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(g.il),e.rXU(m.N_),e.rXU(d.En))}}static{this.\u0275dir=e.FsC({type:s,inputs:{estate:[1,"estate"]}})}}return s})()},370:(T,F,t)=>{t.d(F,{y:()=>s});var e=t(431),c=t(9640);const m=(0,c.UX)("estates"),p=(0,c.UX)("owners"),u=(0,c.UX)("lodgers"),g=(0,c.Mz)(m,p,u,(i,o,l)=>i.estates.map(f=>((i,o,l)=>({...i,address:i.street+" "+i.city+" "+i.zip,plot_address:i.plot?"LOT "+i.plot+" / "+i.street+" "+i.city+" "+i.zip:i.street+" "+i.city+" "+i.zip,owner:o.find(f=>f.id+""==i.owner_id+""),lodger:l.find(f=>f.id+""==i.lodger_id+"")}))(f,o.owners,l.lodgers)));var E=t(496),O=t(1176),d=t(4341),C=t(513),y=t(1997),n=t(4438);let R=(()=>{class i{constructor(l,f){this.formBuilder=l,this.store=f,this.owners=this.store.selectSignal(O.P)}ngOnInit(){this.buildFormGroup()}buildFormGroup(){this.formGroup=this.formBuilder.group({street:new d.MJ("",[d.k0.required]),city:new d.MJ("",[d.k0.required]),zip:new d.MJ("",[d.k0.required]),plot:new d.MJ(""),rent:new d.MJ(0),charges:new d.MJ(0),owner:new d.MJ(this.owners().length?this.owners()[0].id:null),lodger:new d.MJ("")})}create(){if(this.formGroup.invalid)return;const l=(i=>{let o=i.get("owner")?.value;return"string"!=typeof o&&"number"!=typeof o&&o&&(o=i.get("owner")?.value?.id),{street:i.get("street").value,city:i.get("city").value,zip:i.get("zip").value,plot:i.get("plot")?.value,rent:i.get("rent")?.value,charges:i.get("charges")?.value,owner_id:o,lodger_id:i.get("lodger")?.value}})(this.formGroup);this.store.dispatch((0,e.l6)({estate:l}))}static{this.\u0275fac=function(f){return new(f||i)(n.rXU(d.ok),n.rXU(c.il))}}static{this.\u0275dir=n.FsC({type:i})}}return i})();var P=t(6389),D=t(5930);function z(i,o){if(1&i&&n.nrm(0,"nz-option",8),2&i){const l=o.$implicit;n.Y8G("nzValue",l.id)("nzLabel",l.name)}}let w=(()=>{class i extends R{static{this.\u0275fac=(()=>{let l;return function(L){return(l||(l=n.xGo(i)))(L||i)}})()}static{this.\u0275cmp=n.VBU({type:i,selectors:[["create-estate-popup"]],standalone:!0,features:[n.Vt3,n.aNF],decls:21,vars:1,consts:[[1,"form-group-popup",3,"formGroup"],["for","name"],["type","text","formControlName","street",1,"form-control"],["type","text","formControlName","city",1,"form-control"],["type","text","formControlName","zip",1,"form-control"],["type","text","formControlName","plot",1,"form-control"],["for","owner"],["formControlName","owner","nzPlaceHolder","Propri\xe9taire",1,"select"],[3,"nzValue","nzLabel"],[1,"footer"],["nz-button","","nzType","primary",3,"click"]],template:function(f,L){1&f&&(n.j41(0,"form",0)(1,"label",1),n.EFF(2,"Adresse"),n.k0s(),n.nrm(3,"input",2),n.j41(4,"label",1),n.EFF(5,"Ville"),n.k0s(),n.nrm(6,"input",3),n.j41(7,"label",1),n.EFF(8,"Code Postal"),n.k0s(),n.nrm(9,"input",4),n.j41(10,"label",1),n.EFF(11,"Lot"),n.k0s(),n.nrm(12,"input",5),n.j41(13,"label",6),n.EFF(14,"Propri\xe9taire"),n.k0s(),n.j41(15,"nz-select",7),n.Z7z(16,z,1,2,"nz-option",8,n.fX1),n.k0s()(),n.j41(18,"div",9)(19,"button",10),n.bIt("click",function(){return L.create()}),n.EFF(20,"cr\xe9er"),n.k0s()()),2&f&&(n.Y8G("formGroup",L.formGroup),n.R7$(16),n.Dyx(L.owners()))},dependencies:[d.X1,d.qT,d.me,d.BC,d.cb,d.j4,d.JD,y.DH,y.ld,y.WI,C.Zw,C.aO,P.c,D.p],styles:[".form-group-popup[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:flex-start;align-items:flex-start}"]})}}return i})();var M=t(3390),$=t(1747);let s=(()=>{class i{constructor(l,f,L){this.store=l,this.modalService=f,this.actions$=L,this.owners=this.store.selectSignal(O.P),this.lodgers=this.store.selectSignal(E.T),this.estates=this.store.selectSignal(g)}ngOnInit(){this.store.dispatch((0,e.kW)())}openCreateEstatePopup(){this.modalService.create({nzTitle:"Cr\xe9er un nouveau bien",nzContent:w,nzFooter:null})}startEdit(l,f){this.editId=l,setTimeout(()=>{requestAnimationFrame(()=>{f.focus()})},0)}stopEdit(){this.editId=null}edit(l,f,L){const v={id:l.id};v[f]=L.value,this.store.dispatch({type:"[Estates] Edit Estate",estate:v})}deleteEstate(l){this.store.dispatch((0,e.su)({estateId:l.id}))}static{this.\u0275fac=function(f){return new(f||i)(n.rXU(c.il),n.rXU(M.N_),n.rXU($.En))}}static{this.\u0275dir=n.FsC({type:i})}}return i})()},7462:(T,F,t)=>{t.d(F,{X:()=>d});var e=t(4341),c=t(889),a=t(2062),r=t(4438),h=t(9640);let m=(()=>{class C{constructor(n,R){this.formBuilder=n,this.store=R}ngOnInit(){this.buildFormGroup()}buildFormGroup(){this.formGroup=this.formBuilder.group({name:new e.MJ("",[e.k0.required]),street:new e.MJ("",[e.k0.required]),city:new e.MJ("",[e.k0.required]),zip:new e.MJ("",[e.k0.required]),signature:new e.MJ("")})}create(){if(this.formGroup.invalid)return;const n=(0,a.g)(this.formGroup);this.store.dispatch((0,c.lv)({owner:n}))}static{this.\u0275fac=function(R){return new(R||C)(r.rXU(e.ok),r.rXU(h.il))}}static{this.\u0275dir=r.FsC({type:C})}}return C})();var p=t(1997),u=t(513),g=t(8468),E=t(6389),O=t(5930);let d=(()=>{class C extends m{static{this.\u0275fac=(()=>{let n;return function(P){return(n||(n=r.xGo(C)))(P||C)}})()}static{this.\u0275cmp=r.VBU({type:C,selectors:[["app-create-owner-popup"]],standalone:!0,features:[r.Vt3,r.aNF],decls:19,vars:1,consts:[[1,"form-group-popup",3,"formGroup"],["for","name"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","street",1,"form-control"],["type","text","formControlName","city",1,"form-control"],["type","text","formControlName","zip",1,"form-control"],["formControlName","signature"],[1,"footer"],["nz-button","","nzType","primary",3,"click"]],template:function(R,P){1&R&&(r.j41(0,"form",0)(1,"label",1),r.EFF(2,"Nom et pr\xe9nom"),r.k0s(),r.nrm(3,"input",2),r.j41(4,"label",1),r.EFF(5,"Adresse"),r.k0s(),r.nrm(6,"input",3),r.j41(7,"label",1),r.EFF(8,"Ville"),r.k0s(),r.nrm(9,"input",4),r.j41(10,"label",1),r.EFF(11,"Code Postal"),r.k0s(),r.nrm(12,"input",5),r.j41(13,"label",1),r.EFF(14,"Signature"),r.k0s(),r.nrm(15,"signature-pad",6),r.k0s(),r.j41(16,"div",7)(17,"button",8),r.bIt("click",function(){return P.create()}),r.EFF(18,"cr\xe9er"),r.k0s()()),2&R&&r.Y8G("formGroup",P.formGroup)},dependencies:[e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD,p.DH,u.Zw,u.aO,E.c,O.p,g.u]})}}return C})()},2552:(T,F,t)=>{t.d(F,{H:()=>$});var e=t(177),c=t(1747),a=t(9640),r=t(1281),h=t(3993),m=t(6354),p=t(5558),u=t(7673),g=t(9437),E=t(8141),O=t(889),d=t(496),C=t(431),y=t(4438),n=t(5312),R=t(1626);let P=(()=>{class s{constructor(o){this.http=o,this.API_URL=n.c.apiURL}create(o){return this.http.post(`${this.API_URL}/lodgers`,o)}read(){return this.http.get(`${this.API_URL}/lodgers`)}update(o){return this.http.patch(`${this.API_URL}/lodgers`,o)}delete(o){return this.http.delete(`${this.API_URL}/lodgers`,{body:{id:o}}).pipe((0,m.T)(()=>o))}static{this.\u0275fac=function(l){return new(l||s)(y.KVO(R.Qq))}}static{this.\u0275prov=y.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var D=t(7094);let z=(()=>{class s{constructor(o,l,f,L){this.actions$=o,this.lodgerService=l,this.store=f,this.message=L,this.loadOwners$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(r.z8),(0,h.E)(this.store.select(d.T)),(0,m.T)(([v,U])=>U),(0,p.n)(v=>v&&v.length>0?(0,u.of)((0,r.Yq)({lodgers:v})):this.lodgerService.read().pipe((0,m.T)(U=>(0,r.Yq)({lodgers:U})),(0,g.W)(U=>(0,u.of)((0,O.fJ)(U))))))),this.createLodger$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(r.EU),(0,p.n)(({lodger:v,estateId:U})=>this.lodgerService.create(v).pipe((0,m.T)(I=>(U&&this.store.dispatch((0,C.dG)({estate:{id:U,lodger_id:I.id}})),(0,r.B8)({lodger:I}))),(0,g.W)(I=>(0,u.of)((0,r.qU)(I))))))),this.createLodgerSuccess$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(r.B8),(0,E.M)(()=>this.message.success("locataire ajout\xe9 avec succ\xe8s!"))),{dispatch:!1}),this.createLodgerFailure$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(r.qU),(0,E.M)(v=>this.message.error(v.error.message))),{dispatch:!1}),this.updateLodger$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(r.Z1),(0,p.n)(v=>this.lodgerService.update(v.lodger).pipe((0,m.T)(U=>(0,r.YG)({lodger:U})),(0,g.W)(U=>(0,u.of)((0,r.d9)(U))))))),this.deleteLodger$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(r.rX),(0,p.n)(v=>this.lodgerService.delete(v.lodgerId).pipe((0,m.T)(U=>(0,r.CI)({lodgerId:U})),(0,g.W)(()=>(0,u.of)((0,r.CI)(v.ownerId)))))))}static{this.\u0275fac=function(l){return new(l||s)(y.KVO(c.En),y.KVO(P),y.KVO(a.il),y.KVO(D.xh))}}static{this.\u0275prov=y.jDH({token:s,factory:s.\u0275fac})}}return s})();const M=(0,a.vy)({lodgers:[]},(0,a.on)(r.Yq,(s,{lodgers:i})=>({...s,lodgers:i})),(0,a.on)(r.B8,(s,{lodger:i})=>({...s,lodgers:s.lodgers.concat(i)})),(0,a.on)(r.YG,(s,{lodger:i})=>({...s,lodgers:s.lodgers.map(o=>o.id===i.id?{...o,...i}:o)})),(0,a.on)(r.CI,(s,{lodgerId:i})=>({...s,lodgers:s.lodgers.filter(o=>o.id!==i)})));let $=(()=>{class s{constructor(o,l){this.store=o,this.actions$=l,this.store.dispatch((0,r.z8)())}static{this.\u0275fac=function(l){return new(l||s)(y.KVO(a.il),y.KVO(c.En))}}static{this.\u0275mod=y.$C({type:s})}static{this.\u0275inj=y.G2t({imports:[e.MD,a.md.forFeature("lodgers",M),c.Vm.forFeature(z)]})}}return s})()},7778:(T,F,t)=>{t.d(F,{j:()=>$});var e=t(177),c=t(1747),a=t(9640),r=t(3993),h=t(6354),m=t(5558),p=t(7673),u=t(9437),g=t(8141),E=t(1176),O=t(889),d=t(4438),C=t(5312),y=t(1626);let n=(()=>{class s{constructor(o){this.http=o,this.API_URL=C.c.apiURL}get(){return this.http.get(`${this.API_URL}/owners`)}create(o){return this.http.post(`${this.API_URL}/owners`,o)}edit(o){return this.http.patch(`${this.API_URL}/owners`,o).pipe((0,h.T)(l=>o))}delete(o){return this.http.delete(`${this.API_URL}/owners`,{body:{id:o}}).pipe((0,h.T)(l=>o))}static{this.\u0275fac=function(l){return new(l||s)(d.KVO(y.Qq))}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var R=t(7094);let P=(()=>{class s{constructor(o,l,f,L){this.actions$=o,this.ownerService=l,this.store=f,this.message=L,this.loadOwners$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)("[Owners] Load Owners"),(0,r.E)(this.store.select(E.P)),(0,h.T)(([v,U])=>U),(0,m.n)(v=>v&&v.length>0?(0,p.of)({type:"[Owners] Load Owners Success",owners:v}):this.ownerService.get().pipe((0,h.T)(U=>({type:"[Owners] Load Owners Success",owners:U})),(0,u.W)(()=>(0,p.of)({type:"[Owners] Load Owners Failure"})))))),this.addOwner$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)("[Owners] Add Owner"),(0,m.n)(({owner:v})=>this.ownerService.create(v).pipe((0,h.T)(U=>({type:"[Owners] Add Owner Success",owner:U})),(0,u.W)(()=>(0,p.of)({type:"[Owners] Load Owners Failure"})))))),this.addOwnerSuccess$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(O._P),(0,g.M)(()=>this.message.success("propri\xe9taire ajout\xe9 avec succ\xe8s!"))),{dispatch:!1}),this.addOwnerFailure$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)(O.LM),(0,g.M)(v=>this.message.error(v.error.message))),{dispatch:!1}),this.updateOwner$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)("[Owners] Update Owner"),(0,m.n)(({owner:v})=>this.ownerService.edit(v).pipe((0,h.T)(U=>(0,O.eX)({owner:U})),(0,u.W)(()=>(0,p.of)({type:"[Owners] Update Owner Failure"})))))),this.deleteOwner$=(0,c.EH)(()=>this.actions$.pipe((0,c.gp)("[Owners] Delete Owner"),(0,m.n)(v=>this.ownerService.delete(v.ownerId).pipe((0,h.T)(U=>({type:"[Owners] Delete Owner Success",ownerId:U})),(0,u.W)(()=>(0,p.of)({type:"[Owners] Delete Owner Failure"}))))))}static{this.\u0275fac=function(l){return new(l||s)(d.KVO(c.En),d.KVO(n),d.KVO(a.il),d.KVO(R.xh))}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac})}}return s})();const z=(0,a.vy)({owners:[]},(0,a.on)(O.Ju,(s,i)=>({...s})),(0,a.on)(O.kN,(s,i)=>({...s,owners:i.owners})),(0,a.on)(O.fJ,(s,i)=>({...s})),(0,a.on)(O.lv,(s,i)=>({...s})),(0,a.on)(O._P,(s,i)=>({...s,owners:s.owners.concat(i.owner)})),(0,a.on)(O.LM,(s,i)=>({...s})),(0,a.on)(O.HD,(s,i)=>({...s})),(0,a.on)(O.eX,(s,{owner:i})=>({...s,owners:s.owners.map(o=>o.id===i.id?{...o,...i}:o)})),(0,a.on)(O.ye,(s,{ownerId:i})=>({...s,owners:s.owners.filter(o=>o.id!==i)})),(0,a.on)(O.XB,(s,i)=>({...s})));var w=t(3456),M=t(6697);let $=(()=>{class s{constructor(o,l){this.store=o,this.actions$=l,this.loadOwners()}loadOwners(){this.actions$.pipe((0,c.gp)(w.DP),(0,M.s)(1),(0,g.M)(o=>{this.store.dispatch((0,O.Ju)())})).subscribe()}static{this.\u0275fac=function(l){return new(l||s)(d.KVO(a.il),d.KVO(c.En))}}static{this.\u0275mod=d.$C({type:s})}static{this.\u0275inj=d.G2t({imports:[e.MD,a.md.forFeature("owners",z),c.Vm.forFeature(P)]})}}return s})()},8113:(T,F,t)=>{t.d(F,{M:()=>r});var e=t(5312),c=t(4438),a=t(1626);let r=(()=>{class h{constructor(p){this.http=p,this.API_URL=e.c.apiURL}downloadRentReceipt(p,u,g){let E=`estate=${p}`;return u&&(E+=`&startDate=${u}`),g&&(E+=`&endDate=${g}`),this.http.get(`${this.API_URL}/rents/pdf?${E}`,{responseType:"blob"})}sendRentReceipt(p,u,g){let E=`estate=${p}`;return u&&(E+=`&startDate=${u}`),g&&(E+=`&endDate=${g}`),this.http.get(`${this.API_URL}/rents/email?${E}`)}static{this.\u0275fac=function(u){return new(u||h)(c.KVO(a.Qq))}}static{this.\u0275prov=c.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},8543:(T,F,t)=>{t.d(F,{u:()=>y});var e=t(1747),c=t(5558),a=t(6354),r=t(9437),h=t(7673),m=t(8141),p=t(431),u=t(4438),g=t(5312),E=t(1626);let O=(()=>{class n{constructor(P){this.http=P,this.API_URL=g.c.apiURL}getEstates(){return this.http.get(`${this.API_URL}/estates`)}create(P){return this.http.post(`${this.API_URL}/estates`,P)}editEstate(P){return this.http.patch(`${this.API_URL}/estate`,P)}deleteEstate(P){return this.http.delete(`${this.API_URL}/estates`,{body:{id:P}})}static{this.\u0275fac=function(D){return new(D||n)(u.KVO(E.Qq))}}static{this.\u0275prov=u.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var d=t(8113),C=t(7094);let y=(()=>{class n{constructor(P,D,z,w){this.actions$=P,this.estatesService=D,this.rentsService=z,this.message=w,this.loadEstates$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)("[Estates] Load Estates"),(0,c.n)(()=>this.estatesService.getEstates().pipe((0,a.T)(M=>({type:"[Estates] Load Estates Success",estates:M})),(0,r.W)(()=>(0,h.of)({type:"[Estates] Load Estates Failure"})))))),this.createEstate$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)("[Estates] Create Estate"),(0,c.n)(({estate:M})=>this.estatesService.create(M).pipe((0,a.T)($=>({type:"[Estates] Create Estate Success",estate:$})),(0,r.W)(({error:$})=>(0,h.of)({type:"[Estates] Create Estate Failure",error:$})))))),this.createEstateSuccess$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)(p.Cs),(0,m.M)(()=>{this.message.success("Bien ajout\xe9 avec succ\xe8s!")})),{dispatch:!1}),this.editEstate$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)("[Estates] Edit Estate"),(0,c.n)(({estate:M})=>this.estatesService.editEstate(M).pipe((0,a.T)(()=>({type:"[Estates] Edit Estate Success",estate:M})),(0,r.W)(()=>(0,h.of)({type:"[Estates] Edit Estate Failure"})))))),this.deleteEstate$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)(p.su),(0,c.n)(({estateId:M})=>this.estatesService.deleteEstate(M).pipe((0,a.T)(()=>(0,p.Ng)({estateId:M})),(0,r.W)(()=>(0,h.of)({type:"[Estates] Delete Estate Failure"})))))),this.sendRentReceipt$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)(p.eT),(0,c.n)(({estate:M,startDate:$,endDate:s})=>this.rentsService.sendRentReceipt(M.id,$,s).pipe((0,a.T)(i=>(0,p.tT)({estate:i})),(0,r.W)(i=>(0,h.of)((0,p.eV)(i))))))),this.sendRentReceiptSuccess$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)(p.tT),(0,m.M)(({})=>{this.message.success("Votre quittance a bien \xe9t\xe9 envoy\xe9e.")})),{dispatch:!1}),this.sendRentReceiptFaillure$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)(p.eV),(0,m.M)(({})=>{this.message.error("Failed to send rent receipt")})),{dispatch:!1})}static{this.\u0275fac=function(D){return new(D||n)(u.KVO(e.En),u.KVO(O),u.KVO(d.M),u.KVO(C.xh))}}static{this.\u0275prov=u.jDH({token:n,factory:n.\u0275fac})}}return n})()},7211:(T,F,t)=>{t.d(F,{i:()=>r});var e=t(9640),c=t(431);const r=(0,e.vy)({estates:[]},(0,e.on)(c.Lj,(h,m)=>({...h,estates:m.estates})),(0,e.on)(c.Cs,(h,m)=>({...h,estates:[...h.estates,m.estate]})),(0,e.on)(c.wP,(h,m)=>({...h,estates:h.estates.map(p=>p.id===m.estate.id?{...p,...m.estate}:p)})),(0,e.on)(c.Ng,(h,{estateId:m})=>({...h,estates:h.estates.filter(p=>p.id!==m)})))},496:(T,F,t)=>{t.d(F,{T:()=>a});var e=t(9640);const c=(0,e.UX)("lodgers"),a=(0,e.Mz)(c,r=>r.lodgers)},1176:(T,F,t)=>{t.d(F,{P:()=>a});var e=t(9640);const c=(0,e.UX)("owners"),a=(0,e.Mz)(c,r=>r.owners)},1069:(T,F,t)=>{t.d(F,{H:()=>O});var e=t(1747),c=t(5558),a=t(8141),r=t(6354),h=t(9437),m=t(7673),p=t(2440),u=t(4438),g=t(8113),E=t(7094);let O=(()=>{class d{constructor(y,n,R){this.actions$=y,this.rentsService=n,this.message=R,this.downloadRentReceipt$=(0,e.EH)(()=>this.actions$.pipe((0,e.gp)(p.KP),(0,c.n)(({estateId:P,startDate:D,endDate:z})=>this.rentsService.downloadRentReceipt(P,D,z).pipe((0,a.M)(w=>{const M=window.URL.createObjectURL(w),$=document.createElement("a");$.href=M,$.download="quittance.pdf",$.click(),window.URL.revokeObjectURL(M)}),(0,r.T)(w=>(0,p.n9)()),(0,h.W)(w=>(0,m.of)((0,p.kZ)(w)))))))}static{this.\u0275fac=function(n){return new(n||d)(u.KVO(e.En),u.KVO(g.M),u.KVO(E.xh))}}static{this.\u0275prov=u.jDH({token:d,factory:d.\u0275fac})}}return d})()},2062:(T,F,t)=>{t.d(F,{g:()=>e,o:()=>c});const e=a=>({name:a.get("name").value,street:a.get("street").value,city:a.get("city").value,zip:a.get("zip").value,signature:a.get("signature")?.value}),c=(a,r)=>({name:a.get("name").value,street:a.get("street").value,city:a.get("city").value,zip:a.get("zip").value,signature:a.get("signature")?.value,id:r})}}]);