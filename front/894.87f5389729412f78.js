"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[894],{4894:(oe,w,i)=>{i.r(w),i.d(w,{EstatesPageModule:()=>ee});var _=i(177),v=i(1188),E=i(370),M=i(7462),b=i(889),F=i(1281),e=i(4438),d=i(9640),p=i(3390),u=i(1747),C=i(5458),y=i(2440),R=i(7498);let x=(()=>{class o{constructor(t,r,n){this.store=t,this.modalService=r,this.actions$=n}sendDownloadRentReceiptRequest(t){this.store.dispatch((0,y.KP)({estateId:t.id}))}openCreateOwnerPopup(t){this.modalService.create({nzTitle:"Ajouter un nouveau locataire",nzContent:R.r,nzData:{owner:t},nzFooter:null})}static{this.\u0275fac=function(r){return new(r||o)(e.KVO(d.il),e.KVO(p.N_),e.KVO(u.En))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var P=i(8113),j=i(513),O=i(6389),I=i(5930),g=i(1868),f=i(2602),z=i(4191),$=i(3457),m=i(4341),c=i(1997);function T(o,a){if(1&o&&e.nrm(0,"nz-option",2),2&o){const t=a.$implicit;e.Y8G("nzValue",t)("nzLabel",t.name)}}let V=(()=>{class o extends $.N{constructor(t,r,n){super(t,r,n),this.store=t,this.modalService=r,this.actions$=n,this.selectedOwner=null,(0,e.QZP)(()=>{this.selectedOwner=this.estate().owner})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(d.il),e.rXU(p.N_),e.rXU(u.En))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["owner-item"]],features:[e.Vt3],decls:7,vars:1,consts:[[1,"owner-item"],[1,"select",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div"),e.EFF(2,"Propri\xe9taire: "),e.k0s(),e.j41(3,"div")(4,"nz-select",1),e.mxI("ngModelChange",function(l){return e.DH7(n.selectedOwner,l)||(n.selectedOwner=l),l}),e.bIt("ngModelChange",function(){return n.setOwner(n.estate(),n.selectedOwner)}),e.Z7z(5,T,1,2,"nz-option",2,e.fX1),e.k0s()()()),2&r&&(e.R7$(4),e.R50("ngModel",n.selectedOwner),e.R7$(),e.Dyx(n.owners()))},dependencies:[m.BC,m.vS,c.ld,c.WI],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}.owner-item[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;gap:10px}.select[_ngcontent-%COMP%]{width:100%}"]})}}return o})();var X=i(1257);function k(o,a){if(1&o&&e.nrm(0,"nz-option",2),2&o){const t=a.$implicit;e.Y8G("nzValue",t)("nzLabel",t.name)}}let G=(()=>{class o extends X.t{constructor(t,r,n,s){super(t,r,n,s),this.store=t,this.modalService=r,this.actions$=n,this.rentService=s,this.selectedLodger=null,(0,e.QZP)(()=>{this.selectedLodger=this.estate().lodger})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(d.il),e.rXU(p.N_),e.rXU(u.En),e.rXU(C.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["lodger-item"]],features:[e.Vt3],decls:7,vars:1,consts:[[1,"lodger-item"],[1,"select",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div"),e.EFF(2,"Locataire: "),e.k0s(),e.j41(3,"div")(4,"nz-select",1),e.mxI("ngModelChange",function(l){return e.DH7(n.selectedLodger,l)||(n.selectedLodger=l),l}),e.bIt("ngModelChange",function(){return n.setLodger(n.selectedLodger)}),e.Z7z(5,k,1,2,"nz-option",2,e.fX1),e.k0s()()()),2&r&&(e.R7$(4),e.R50("ngModel",n.selectedLodger),e.R7$(),e.Dyx(n.lodgers()))},dependencies:[m.BC,m.vS,c.ld,c.WI],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:flex-start;align-items:center}.lodger-item[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;gap:10px}.select[_ngcontent-%COMP%]{width:100%}"]})}}return o})();const D=o=>({paid:o});function L(o,a){if(1&o){const t=e.RV6();e.j41(0,"li",12),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openEditOwner(n))}),e.EFF(1),e.k0s()}if(2&o){const t=a.$implicit;e.R7$(),e.JRh(t.name)}}function N(o,a){if(1&o){const t=e.RV6();e.j41(0,"li",12),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteOwner(n))}),e.EFF(1),e.k0s()}if(2&o){const t=a.$implicit;e.R7$(),e.JRh(t.name)}}function S(o,a){if(1&o){const t=e.RV6();e.j41(0,"li",12),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteLodger(n))}),e.EFF(1),e.k0s()}if(2&o){const t=a.$implicit;e.R7$(),e.JRh(t.name)}}function B(o,a){1&o&&e.nrm(0,"div",19)}function U(o,a){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"li",18),e.DNE(2,B,1,0,"div",19),e.j41(3,"ul")(4,"li",14),e.nrm(5,"owner-item",20),e.k0s(),e.j41(6,"li",14),e.nrm(7,"lodger-item",20),e.k0s(),e.j41(8,"li",14)(9,"div",21)(10,"div",22),e.EFF(11,"rent:"),e.k0s(),e.j41(12,"div",23),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.sdS(16),l=e.XpG();return e.Njj(l.startEdit(n.id+"rent",s))}),e.j41(13,"div",24),e.EFF(14),e.k0s(),e.j41(15,"input",25,5),e.bIt("blur",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.stopEdit())})("change",function(){const n=e.eBV(t).$implicit,s=e.sdS(16),l=e.XpG();return e.Njj(l.edit(n,"rent",s))}),e.k0s()()()(),e.j41(17,"li",14)(18,"div",21)(19,"div",22),e.EFF(20,"charges:"),e.k0s(),e.j41(21,"div",23),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.sdS(25),l=e.XpG();return e.Njj(l.startEdit(n.id+"charges",s))}),e.j41(22,"div",24),e.EFF(23),e.k0s(),e.j41(24,"input",25,6),e.bIt("blur",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.stopEdit())})("change",function(){const n=e.eBV(t).$implicit,s=e.sdS(25),l=e.XpG();return e.Njj(l.edit(n,"charges",s))}),e.k0s()()()(),e.j41(26,"li",14)(27,"div",26)(28,"button",8),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openRentReceipt(n))}),e.EFF(29,"quittances"),e.k0s(),e.j41(30,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteEstate(n))}),e.EFF(31,"supprimer"),e.k0s()()()()(),e.bVm()}if(2&o){const t=a.$implicit,r=e.XpG();e.R7$(),e.Y8G("nzTitle",t.plot_address)("ngClass",e.eq3(13,D,t.actualMonthPaid)),e.R7$(),e.vxM(t.rentReceiptSentByEmail?2:-1),e.R7$(3),e.Y8G("estate",t),e.R7$(2),e.Y8G("estate",t),e.R7$(6),e.Y8G("hidden",r.editId===t.id+"rent"),e.R7$(),e.JRh(t.rent),e.R7$(),e.Y8G("value",t.rent)("hidden",r.editId!==t.id+"rent"),e.R7$(7),e.Y8G("hidden",r.editId===t.id+"charges"),e.R7$(),e.JRh(t.charges),e.R7$(),e.Y8G("value",t.charges)("hidden",r.editId!==t.id+"charges")}}const Y=[{path:"",component:(()=>{class o extends E.y{constructor(t,r,n,s,l,h){super(t,r,n,h),this.store=t,this.modalService=r,this.actions$=n,this.rentService=s,this.ownerService=l,this.rentHttpService=h}openCreateOwner(){this.modalService.create({nzTitle:"Ajouter un nouveau propri\xe9taire",nzContent:M.X,nzFooter:null})}openCreateLodger(){this.rentService.openCreateLodgerPopup()}openEditOwner(t){this.ownerService.openCreateOwnerPopup(t)}deleteOwner(t){this.store.dispatch((0,b.HD)({ownerId:t.id}))}deleteLodger(t){this.store.dispatch((0,F.rX)({lodgerId:t.id}))}openRentReceipt(t){this.rentService.downloadCustomizedRentReceipt(t)}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(d.il),e.rXU(p.N_),e.rXU(u.En),e.rXU(C.t),e.rXU(x),e.rXU(P.M))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-estates-page"]],features:[e.Vt3],decls:41,vars:6,consts:[["owner",""],["editOwner",""],["removeOwner",""],["lodger",""],["removeLodger",""],["editableRentInput",""],["editableChargesInput",""],[1,"add-estate-button-container"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzDropdownMenu"],["nz-selectable",""],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item","","nz-dropdown","",3,"nzDropdownMenu"],["nz-menu-item",""],[1,"estates-content"],["nz-menu","","nzMode","inline"],[4,"ngFor","ngForOf"],["nz-submenu","","nzIcon","home",3,"nzTitle","ngClass"],["nz-icon","","nzType","mail",1,"sent"],[3,"estate"],[1,"row","cell"],[1,"title"],[1,"editable-cell-number","clickable",3,"click"],[3,"hidden"],["nz-demo-input-number-basic","","type","number",3,"blur","change","value","hidden"],[1,"row","footer-buttons"],["nz-button","","nzType","primary","nzDanger","",3,"click"]],template:function(r,n){if(1&r){const s=e.RV6();e.j41(0,"div",7)(1,"button",8),e.bIt("click",function(){return e.eBV(s),e.Njj(n.openCreateEstatePopup())}),e.EFF(2,"+ bien"),e.k0s(),e.j41(3,"button",9),e.EFF(4,"propri\xe9taire"),e.k0s(),e.j41(5,"button",9),e.EFF(6,"locataire"),e.k0s()(),e.j41(7,"nz-dropdown-menu",10,0)(9,"ul",11)(10,"li",12),e.bIt("click",function(){return e.eBV(s),e.Njj(n.openCreateOwner())}),e.EFF(11,"cr\xe9er un nouveau propri\xe9taire"),e.k0s(),e.j41(12,"li",13),e.EFF(13,"\xe9diter un propri\xe9taire"),e.k0s(),e.j41(14,"li",13),e.EFF(15,"supprimer un propri\xe9taire"),e.k0s()()(),e.j41(16,"nz-dropdown-menu",null,1)(18,"ul",11),e.Z7z(19,L,2,1,"li",14,e.fX1),e.k0s()(),e.j41(21,"nz-dropdown-menu",null,2)(23,"ul",11),e.Z7z(24,N,2,1,"li",14,e.fX1),e.k0s()(),e.j41(26,"nz-dropdown-menu",10,3)(28,"ul",11)(29,"li",12),e.bIt("click",function(){return e.eBV(s),e.Njj(n.openCreateLodger())}),e.EFF(30,"cr\xe9er un nouveau locataire"),e.k0s(),e.j41(31,"li",13),e.EFF(32,"supprimer un locataire"),e.k0s()()(),e.j41(33,"nz-dropdown-menu",null,4)(35,"ul",11),e.Z7z(36,S,2,1,"li",14,e.fX1),e.k0s()(),e.j41(38,"div",15)(39,"ul",16),e.DNE(40,U,32,15,"ng-container",17),e.k0s()()}if(2&r){const s=e.sdS(8),l=e.sdS(17),h=e.sdS(22),te=e.sdS(27),ne=e.sdS(34);e.R7$(3),e.Y8G("nzDropdownMenu",s),e.R7$(2),e.Y8G("nzDropdownMenu",te),e.R7$(7),e.Y8G("nzDropdownMenu",l),e.R7$(2),e.Y8G("nzDropdownMenu",h),e.R7$(5),e.Dyx(n.owners()),e.R7$(5),e.Dyx(n.owners()),e.R7$(7),e.Y8G("nzDropdownMenu",ne),e.R7$(5),e.Dyx(n.lodgers()),e.R7$(4),e.Y8G("ngForOf",n.estates())}},dependencies:[_.YU,_.Sq,j.aO,O.c,I.p,g.jS,g.CU,g.Nu,f.j3,f.wQ,f.h4,z.Dn,V,G],styles:["[_nghost-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-flow:column nowrap;align-items:flex-start;justify-content:flex-start}.add-estate-button-container[_ngcontent-%COMP%]{width:100%;right:0;z-index:1000;padding:10px;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;gap:10px}.estates-content[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto}.input-number[_ngcontent-%COMP%]{min-width:40px}.field[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;gap:10px}.row[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-evenly;align-items:center}.cell[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;gap:10px}.footer-buttons[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-evenly;align-items:center;gap:10px}.paid[_ngcontent-%COMP%]{position:relative;color:var(--ant-success-color);background-color:var(--ant-success-color-deprecated-bg)}.sent[_ngcontent-%COMP%]{right:40px;bottom:10px;position:absolute;box-shadow:-.5px .5px 0 0 var(--ant-success-color);background-color:var(--color-papper-background);color:var(--color-papper-font);border-radius:50px;width:20px;height:20px;font-size:10px;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center}  .ant-menu-submenu-title{padding:0!important}"]})}}return o})()}];let H=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[v.iI.forChild(Y),v.iI]})}}return o})();var Z=i(7211),J=i(8543),K=i(1069),Q=i(8221),A=i(2552),W=i(9183),q=i(8167);let ee=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[_.MD,H,Q.j,m.YN,A.H,W.X,p.U6,j.Zw,g.GP,c.DH,f.Cu,z.Y3.forRoot([q.gF$]),d.md.forFeature("estates",Z.i),u.Vm.forFeature(J.u,K.H),c.DH]})}}return o})()}}]);